<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <nav>
          <div class="brand">
            <a href="/">MeShop.</a>
          </div>
          <div class="nav-items">
            <a href="/index.html">Home</a>
            <a href="/login.html">Login</a>
            <!-- <a href="/signup.html">Signup</a> -->
            <!-- <a href="/cart">My Cart</a> -->
          </div>
        </nav>
      </header>
      <main class="container logMain">
        <h3>SignUp</h3>
        
            <input type="text" placeholder="NAME" id="name-input">
            <input type="email" placeholder="EMAIL" id="email-input">
            <input type="password" placeholder="PASSWORD" id="pass-input">
            <input type="password" placeholder="CONFIRM PASSWORD" id="confirmpass-input">
            <p id="error-message"></p>
            <button class="submit" id="submit">REGISTER</button>
        
      </main>


      <script src="/script.js"></script>
      <script>
        // signup
let submit=document.querySelector(".submit");
submit.addEventListener('click',signupUser)
function signupUser() {
    console.log("ram");
    var name = document.getElementById("name-input").value;
    var email = document.getElementById("email-input").value;
    var password = document.getElementById("pass-input").value;
    var confirmPassword = document.getElementById("confirmpass-input").value;
    

    if (name && email && password && confirmPassword && password === confirmPassword) {
        var user = {
            name: name,
            email: email,
            password: password,
        };
        const users = localStorage.getItem("users");
        console.log("USERS", users);
        var usersArr = [];
        if (users) {
            usersArr = JSON.parse(localStorage.getItem("users"));
            if (usersArr.filter((user) => user.email === email).length == 0) {
                usersArr.push(user);
            } else {
                document.getElementById("error-message").innerText =
                    "user with this email already exists";
            }
        } else {
            usersArr = [user];
        }

        localStorage.setItem("users", JSON.stringify(usersArr));
        window.location.href = "/login.html";
    }
    else{
        document.getElementById("error-message").innerText ="PLEASE FILL ALL DETAILS"
    }
}

      </script>
</body>
</html>